<!DOCTYPE html>
<html>
<head>
    <title>Canvas Renderer</title>
    <!-- Einbinden der JSZip-Bibliothek -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
</head>
<body>
    <input type="file" id="file-input" accept=".zip">
    <canvas id="main-canvas" width="800" height="600"></canvas>

    <script>
        document.getElementById('file-input').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(event) {
                const data = event.target.result;
                JSZip.loadAsync(data).then(function(zip) {
                    // Verarbeite die Dateien in der ZIP-Datei
                    renderCanvasFromZip(zip);
                });
            };
            reader.readAsArrayBuffer(file);
        });

        function renderCanvasFromZip(zip) {
            const canvas = document.getElementById('main-canvas');
            const ctx = canvas.getContext('2d');

            // Lade und rendere das Canvas-Bild
            zip.file('canvas.png').async('blob').then(function(blob) {
                const url = URL.createObjectURL(blob);
                const img = new Image();
                img.onload = function() {
                    ctx.drawImage(img, 0, 0);
                    URL.revokeObjectURL(url); // Freigabe der URL
                };
                img.src = url;
            });

            // Lade und verarbeite Objekte (Bilder und PDFs)
            zip.forEach(function(relativePath, zipEntry) {
                // Ãœberspringe das Canvas-Bild, da es bereits verarbeitet wurde
                if (zipEntry.name === 'canvas.png') return;

                // Verarbeite hier weitere Objekte (Bilder, PDFs, etc.)
                // ...
            });
        }
    </script>
</body>
</html>
